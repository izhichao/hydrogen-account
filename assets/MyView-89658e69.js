import{d as A,u as le,c as ie,s as re,a as Q,b as ce,e as D,w as de,f as ue}from"./elevation-8c8294a2.js";import{s as me,a as he,b as fe,c as ve,u as _e,d as pe,e as ge}from"./loading-aa03f27c.js";import{r as F,m as Z,o as V,c as w,e as a,i as ke,n as y,p as be,q as M,b as l,l as R,d as te,x,f as W,y as ye,s as K,w as S,F as X,h as Se,t as z,g as p,a as ee,k as H,z as Ce,A as Ve,_ as we}from"./index-c9eda65c.js";import{s as E,a as Ne}from"./DialogSfc-29186581.js";import{a as Oe,_ as Ie}from"./Header-a50ab88d.js";import{_ as Be}from"./Circle-e3708541.js";import{u as $e}from"./useAccountStore-99e6a6e5.js";import{u as Ae}from"./useDealStore-7f0e9a3d.js";import{u as De}from"./useConfigStore-a44fecdd.js";import{g as Me}from"./getNow-e1064b64.js";/* empty css                    */const ne={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:String,uncheckedColor:String,disabled:Boolean,readonly:Boolean,indeterminate:Boolean,iconSize:[String,Number],ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onChange"]},rules:Array,onClick:A(),onChange:A(),"onUpdate:modelValue":A(),"onUpdate:indeterminate":A()},Re=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY");function ze(){const{bindParent:e,parentProvider:i,index:h}=le(Re);return{index:h,checkboxGroup:i,bindCheckboxGroup:e}}const{name:He,n:Ee,classes:Je}=ie("checkbox");function Te(e,i){const h=F("var-icon"),_=F("var-hover-overlay"),N=F("var-form-details"),k=Z("hover"),r=Z("ripple");return V(),w("div",{class:y(e.n("wrap")),onClick:i[0]||(i[0]=(...O)=>e.handleClick&&e.handleClick(...O))},[a("div",{class:y(e.n())},[ke((V(),w("div",{class:y(e.classes(e.n("action"),[e.checked||e.isIndeterminate,e.n("--checked"),e.n("--unchecked")],[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:be({color:e.checked||e.isIndeterminate?e.checkedColor:e.uncheckedColor})},[e.isIndeterminate?M(e.$slots,"indeterminate-icon",{key:0},()=>[l(h,{class:y(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"minus-box",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):R("v-if",!0),e.checked&&!e.isIndeterminate?M(e.$slots,"checked-icon",{key:1},()=>[l(h,{class:y(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):R("v-if",!0),!e.checked&&!e.isIndeterminate?M(e.$slots,"unchecked-icon",{key:2},()=>[l(h,{class:y(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):R("v-if",!0),l(_,{hovering:!e.disabled&&!e.formDisabled&&e.hovering},null,8,["hovering"])],6)),[[k,e.handleHovering,"desktop"],[r,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),e.$slots.default?(V(),w("div",{key:0,class:y(e.classes(e.n("text"),[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")]))},[M(e.$slots,"default")],2)):R("v-if",!0)],2),l(N,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const ae=te({name:He,directives:{Ripple:me,Hover:he},components:{VarIcon:re,VarFormDetails:fe,VarHoverOverlay:ve},props:ne,setup(e){const i=Q(e,"modelValue"),h=Q(e,"indeterminate"),_=x(()=>i.value===e.checkedValue),N=x(()=>e.checkedValue),k=W(!1),{checkboxGroup:r,bindCheckboxGroup:O}=ze(),{hovering:J,handleHovering:T}=_e(),{form:c,bindForm:U}=pe(),{errorMessage:f,validateWithTrigger:G,validate:C,resetValidation:I}=ce(),B={checkedValue:N,checked:_,sync:u,validate:m,resetValidation:I,reset:g,resetWithAnimation:s};D(O,B),D(U,B);function j(t){ye(()=>{const{validateTrigger:n,rules:o,modelValue:v}=e;G(n,t,o,v)})}function $(t){const{checkedValue:n,onChange:o}=e;i.value=t,h.value=!1,D(o,i.value),j("onChange"),t===n?r==null||r.onChecked(n):r==null||r.onUnchecked(n)}function P(t){const{disabled:n,readonly:o,checkedValue:v,uncheckedValue:L,onClick:b}=e;if(c!=null&&c.disabled.value||n||(D(b,t),c!=null&&c.readonly.value||o))return;k.value=!0;const se=r?r.checkedCount.value>=Number(r.max.value):!1;!_.value&&se||$(_.value?L:v)}function u(t){const{checkedValue:n,uncheckedValue:o}=e;i.value=t.includes(n)?n:o}function s(){k.value=!1}function g(){i.value=e.uncheckedValue,I()}function d(t){const{checkedValue:n,uncheckedValue:o}=e;![n,o].includes(t)&&(t=_.value?o:n),$(t)}function m(){return C(e.rules,e.modelValue)}return{isIndeterminate:h,withAnimation:k,checked:_,errorMessage:f,checkboxGroupErrorMessage:r==null?void 0:r.errorMessage,formDisabled:c==null?void 0:c.disabled,formReadonly:c==null?void 0:c.readonly,hovering:J,n:Ee,classes:Je,handleHovering:T,handleClick:P,toggle:d,reset:g,validate:m,resetValidation:I}}});ae.render=Te;var Y=ae;de(Y);ue(Y,ne);const Ue=Y;const oe=e=>{setTimeout(()=>{window.location.reload()},e)},q=e=>(Ce("data-v-843967d5"),e=e(),Ve(),e),Ge={class:"main-content"},je={class:"card-list"},Pe={class:"total"},Le=q(()=>a("div",{class:"total__title"},"总资产",-1)),Fe={class:"total__amount"},Ke={class:"statistics"},Xe={class:"statistics__count__amount"},We={class:"statistics__count__title"},Ye={class:"select"},qe=["onClick"],Qe=["innerHTML"],Ze={class:"select__item__title"},xe=q(()=>a("div",{class:"select__item__enter iconfont"},"",-1)),eo={class:"config"},oo={class:"config__show"},to=q(()=>a("div",{class:"config__show__title"},"统计图表",-1)),no=te({__name:"MyView",setup(e){const i=Se(),h=Ae(),{timeDiff:_,dealAmount:N,totalExpense:k,totalIncome:r}=K(h),O=[{value:_,text:"记账天数"},{value:N,text:"交易笔数"},{value:k,text:"总支出"},{value:r,text:"总收入"}],J=$e(),{totalAsset:T}=K(J),c=W(!1),U=De(),{show:f}=K(U),G=[{icon:"&#xe65e;",text:"分类"},{icon:"&#xe621;",text:"导入"},{icon:"&#xe622;",text:"导出"},{icon:"&#xe615;",text:"清空"},{icon:"&#xe677;",text:"帮助"},{icon:"&#xe600;",text:"设置"},{icon:"&#xe739;",text:"分享"}],C=W(),I=()=>{C.value.click(),C.value.onchange=()=>{const u=C.value.files[0];if(u.type!=="application/json"){E.error({content:"请上传JSON文件",duration:2e3});return}const s=new FileReader;s.readAsText(u,"utf-8"),s.onload=g=>{var d;try{const m=JSON.parse((d=g.target)==null?void 0:d.result),{account:t,category:n,config:o,deal:v}=m;t&&localStorage.setItem("account",JSON.stringify(t)),n&&localStorage.setItem("category",JSON.stringify(n)),o&&localStorage.setItem("config",JSON.stringify(o)),v&&localStorage.setItem("deal",JSON.stringify(v)),E.success({content:"导入成功",duration:1500}),oe(1500)}catch{E.error({content:"JSON文件格式错误",duration:2e3})}}}},B=()=>{const{yearStr:u,monthStr:s,dayStr:g}=Me();let d={};const m=localStorage.getItem("config"),t=localStorage.getItem("category"),n=localStorage.getItem("account"),o=localStorage.getItem("deal");m&&(d.config=JSON.parse(m)),t&&(d.category=JSON.parse(t)),n&&(d.account=JSON.parse(n)),o&&(d.deal=JSON.parse(o));const v=JSON.stringify(d),L=new Blob([v],{type:"text/json"}),b=document.createElement("a");b.href=window.URL.createObjectURL(L),b.download=`氢记账_${u}年${s}月${g}日.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b)},j=()=>{Ne("数据将无法恢复！确认清空？").then(u=>{u==="confirm"&&(localStorage.clear(),E.success({content:"清空成功",duration:1500}),oe(1500))})},$=()=>{navigator.share?navigator.share({title:"氢记账",url:window.location.href.replace(window.location.hash,""),text:"轻量级记账神器，记录您的每一笔交易！"}):alert("您的浏览器不支持分享功能！")},P=u=>{switch(u){case"分类":i.push({name:"Category"});break;case"导入":I();break;case"导出":B();break;case"清空":j();break;case"帮助":i.push({name:"Help"});break;case"设置":c.value=!0;break;case"分享":$();break}};return(u,s)=>{const g=Be,d=Ie,m=Oe,t=Ue,n=ge;return V(),w(X,null,[a("div",Ge,[l(g),l(d,{title:"我的"}),a("div",je,[l(m,{header:!1},{default:S(()=>[a("div",Pe,[Le,a("div",Fe,z(p(T)),1)]),a("div",Ke,[(V(),w(X,null,ee(O,o=>a("div",{class:"statistics__count",key:o.text},[a("div",Xe,z(o.value),1),a("div",We,z(o.text),1)])),64))])]),_:1}),l(m,{header:!1},{default:S(()=>[a("div",Ye,[(V(),w(X,null,ee(G,o=>a("div",{class:"select__item",key:o.text,onClick:v=>P(o.text)},[a("div",{class:"select__item__icon iconfont",innerHTML:o.icon},null,8,Qe),a("div",Ze,z(o.text),1),xe],8,qe)),64))])]),_:1})])]),a("input",{type:"file",ref_key:"inRef",ref:C,style:{display:"none"}},null,512),l(n,{show:c.value,"onUpdate:show":s[4]||(s[4]=o=>c.value=o)},{default:S(()=>[a("div",eo,[a("div",oo,[to,l(t,{modelValue:p(f).category,"onUpdate:modelValue":s[0]||(s[0]=o=>p(f).category=o)},{default:S(()=>[H("分类")]),_:1},8,["modelValue"]),l(t,{modelValue:p(f).day,"onUpdate:modelValue":s[1]||(s[1]=o=>p(f).day=o)},{default:S(()=>[H("月支出")]),_:1},8,["modelValue"]),l(t,{modelValue:p(f).month,"onUpdate:modelValue":s[2]||(s[2]=o=>p(f).month=o)},{default:S(()=>[H("年支出")]),_:1},8,["modelValue"]),l(t,{modelValue:p(f).year,"onUpdate:modelValue":s[3]||(s[3]=o=>p(f).year=o)},{default:S(()=>[H("总支出")]),_:1},8,["modelValue"])])])]),_:1},8,["show"])],64)}}});const _o=we(no,[["__scopeId","data-v-843967d5"]]);export{_o as default};
